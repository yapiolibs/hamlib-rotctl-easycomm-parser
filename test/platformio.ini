[env]
build_flags =
    -Wall
    -Werror
src_build_flags =
    -Wall
    -Werror

[env:atmelavr]
platform = atmelavr
board = megaatmega2560
framework = arduino
build_flags =
    ${env.build_flags}
    -Wl,-u,vfscanf,-lscanf_flt,-u,vfprintf,-lprintf_flt
upload_speed =
# 57600
    115200 # default

[env:ststm32]
platform = ststm32
board = blackpill_f401cc
framework = arduino
build_flags =
    ${env.build_flags}
    -Wl,-u_scanf_float,-u_printf_float
upload_protocol = stlink # requires stlink programmer
test_transport = custom # requires serial converter; STM transmits on PA2, RX PA3
test_speed = 115200

[env:espressif8266]
platform = espressif8266
board = d1_mini
framework = arduino
upload_speed =
# 115200 # default
# 23040
    460800
# 921600

[env:espressif32]
platform = espressif32
board = esp32doit-devkit-v1
framework = arduino
build_flags = -Wall
upload_speed =
# 115200 # default
# 460800
    921600

[env:native]
platform = native
src_build_flags =
    ${env.src_build_flags}
    -DENV_NATIVE
extra_scripts = post:integration/integration_test_hook.py
